!function(d){d.fn.thaiaddress=function(t){function i(t){d.ajax({url:"thai.address.php",data:{addr:t},dataType:"json",method:"POST",success:function(t){var i=d("#"+t.group);i.html('<option value="" data-id="0"> Select</option></select>'),d.each(t.data,function(d,a){var e="";a.id==$('input[data-id="'+t.group+'1"]').val()&&(e='selected="selected"');var n='<option value="'+t.group+","+a.id+'" data-id="'+a.id+'" '+e+">\t"+a.name+"</option>";i.append(n)})}})}var a=d(this),e=["gid","pid","aid","did"],n=[],p='disabled="disabled"';""!=$('input[data-id="category"]').val()&&(p="");var o="required";d.each(e,function(t,i){"aid"!=i&&"did"!=i||(o=""),a.append('<div class="col-md-3 col-sm-3 col-xs-12 form-group has-feedback">   <select name="'+i+'" id="'+i+'" '+p+' class="form-control" '+o+' ><option value="" data-id="0"> Select</option></select></div>'),n[t]=d("#"+i)}),i(""),d("#gid,#pid,#aid,#did").change(function(t){var i=d(this),a=i[0].id,e=i.children("option:selected").val();i.children("option:selected").attr("selected","selected"),"gid"==a&&0==$('input[data-id="gid1"]').val(),"pid"==a&&0==$('input[data-id="pid1"]').val(),"aid"==a&&0==$('input[data-id="aid1"]').val(),d.ajax({url:"thai.address.php",data:{addr:e},dataType:"json",method:"POST",success:function(t){var i=d("#"+t.group);i.html('<option value="" data-id="0"> Select</option></select>'),d.each(t.data,function(d,a){var e="";a.id==$('input[data-id="'+t.group+'1"]').val()&&(e="selected");var n='<option value="'+t.group+","+a.id+'" data-id="'+a.id+'" '+e+" >\t"+a.name+"</option>";i.append(n)})}})})}}(jQuery),setTimeout(function(){0!=$('input[data-id="gid1"]').val()&&($("#gid").prepend('<option value="gid,'+$('input[data-id="gid1"]').val()+'" data-id="'+$('input[data-id="gid1"]').val()+'" selected> '+$('input[data-id="geo1"]').val()+"</option>"),$("#gid").trigger("change")),0!=$('input[data-id="pid1"]').val()&&($("#pid").prepend('<option value="pid,'+$('input[data-id="pid1"]').val()+'" data-id="'+$('input[data-id="pid1"]').val()+'" selected> '+$('input[data-id="province1"]').val()+"</option>"),$("#pid").trigger("change")),0!=$('input[data-id="aid1"]').val()&&($("#aid").prepend('<option value="aid,'+$('input[data-id="aid1"]').val()+'" data-id="'+$('input[data-id="aid1"]').val()+'" selected> '+$('input[data-id="amphur1"]').val()+"</option>"),$("#aid").trigger("change")),0!=$('input[data-id="did1"]').val()&&($("#did").prepend('<option value="did,'+$('input[data-id="did1"]').val()+'" data-id="'+$('input[data-id="did1"]').val()+'" selected> '+$('input[data-id="district1"]').val()+"</option>"),$("#did").trigger("change"))},1e3),setTimeout(function(){$("#gid,#pid,#aid,#did").change(function(d){var t=$(this),i=t[0].id,a={};if("gid"==i){$("#aid,#did").children("option").removeAttr("selected"),$("#aid,#did").children('option[data-id="0"]').attr("selected","selected"),a={gid:t.children("option:selected").attr("data-id"),geo:t.children("option:selected").text().trim(),amphur:"",district:"",aid:0,did:0,pid:0,province:""},settings=$.extend({},$defaultsp,a),$defaultsp=settings;var e={step:"second",data:$defaultsp,id:$("#itemId").val()};console.log($defaultsp),updatedata(e)}if("pid"==i){$("#did").children("option").removeAttr("selected"),$("#did").children('option[data-id="0"]').attr("selected","selected"),a={pid:t.children("option:selected").attr("data-id"),province:t.children("option:selected").text().trim(),amphur:"",district:"",aid:0,did:0},settings=$.extend({},$defaultsp,a),$defaultsp=settings;var e={step:"second",data:$defaultsp,id:$("#itemId").val()};updatedata(e)}if("aid"==i){a={aid:t.children("option:selected").attr("data-id"),amphur:t.children("option:selected").text().trim(),district:"",did:0},settings=$.extend({},$defaultsp,a),$defaultsp=settings;var e={step:"second",data:$defaultsp,id:$("#itemId").val()};updatedata(e)}if("did"==i){a={did:t.children("option:selected").attr("data-id"),district:t.children("option:selected").text().trim()},settings=$.extend({},$defaultsp,a),$defaultsp=settings;var e={step:"second",data:$defaultsp,id:$("#itemId").val()};updatedata(e)}})},2e3),$("#divgeo").thaiaddress({});