function saveimage(e,a){var i=($(a),"../../post/images/"+$("#imageFolder").val()),s={file:e,path:i,type:"save"};$.post("../plugin/rotate/index.php",s).done(function(a){var i=$('span.preview[data-id="'+e+'"]');i.html(""),setTimeout(function(){i.html('<a class="visible-xs-inline hidden-sm hidden-md hidden-lg" href="'+a.image+'" target="_blank"> <img data-dz-thumbnail="" src="'+a.image+'"></a>\t<img class="hidden-xs" data-dz-thumbnail=""  src="'+a.image+'">')},1e3)})}function rotateimage(e,a){var i=$(a),s=i.parent("div").parent("div.file-row"),t=(s.children("div").children("span.preview"),"../../post/images/"+$("#imageFolder").val()),n={file:e,path:t,type:"rotate"};$.post("../plugin/rotate/index.php",n).done(function(a){var i=$('span.preview[data-id="'+e+'"]');i.html(""),setTimeout(function(){i.html('<a class="visible-xs-inline hidden-sm hidden-md hidden-lg" href="'+a.image+'" target="_blank"> <img data-dz-thumbnail="" src="'+a.image+'"></a>\t<img class="hidden-xs" data-dz-thumbnail=""  src="'+a.image+'">')},1e3)})}function deletethisfile(e,a){nfile>1?nfile--:nfile=1;var i=$(a),s="../../post/images/"+$("#imageFolder").val(),t={file:e,path:s};$.post("../plugin/_upload/delete.php",t).done(function(e){i.parent("div").parent("div.file-row").hide("slow"),i.parent("div").parent("div.file-row").html(""),gallery=$("#previews2 a:visible").simpleLightbox()})}function deletethisfile3(e,a){nfile>1?nfile--:nfile=1;var i=$(a);({file:e,foldername:$("#imageFolder").val()}),"images/index.php?file="+e+"&foldername="+$("#imageFolder").val();$.ajax({url:"images/index.php?file="+e+"&foldername="+$("#imageFolder").val(),success:function(e){alert(response),i.parent("div").parent("div.file-row").hide("slow")}})}var nfile=1,gallery;Dropzone.autoDiscover=!1,$(function(){var e=new Dropzone("#my-dropzone",{maxFilesize:3,maxFiles:10,parallelUploads:10,paramName:"files",uploadMultiple:!0,autoProcessQueue:!1,dictDefaultMessage:"โพสรูปคลิ๊กตรงนี้.........",params:{foldername:$("#imageFolder").val()},previewTemplate:' <div data-theme="a"  class="file-row "><div> <span class="preview"><img data-dz-thumbnail /></span>  </div>  <div class="hidden-xs" >   <p class="name" data-dz-name></p><div class="name2" data-dz-name2></div>   <strong class="error text-danger" data-dz-errormessage></strong>   </div>  <div class="hidden-xs">    <p class="size" data-dz-size></p>    <div class="fileurl" data-dz-id></div>  <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">  <div class="progress-bar progress-bar-success" style="width:0%;" data-dz-uploadprogress></div> </div> </div> <div> <button dz-started class="btn btn-primary start">   <i class="glyphicon glyphicon-upload"></i>   <span>Start</span> </button> <button data-dz-remove class="btn btn-warning cancel">   <i class="glyphicon glyphicon-ban-circle"></i>  <span>Cancel</span>  </button> <button  class="btn btn-danger delete"> <i class="glyphicon glyphicon-trash"></i> <span >Delete</span> </button> </div></div>',previewsContainer:"#previews",init:function(){$.ajax({url:"images/index.php",data:{foldername:$("#imageFolder").val()},cache:!1,dataType:"json",method:"GET",success:function(e){e.files;if(""!=$("#itemId").val()){var a=$("#itemId").val()+"/images/images";sendtogg2(a,e.files)}$.each(e.files,function(e,a){var i=({name:a.name,name2:a.thumbnailUrl,size:a.size,deleteUrl:a.deleteUrl,thumbnailUrl:a.thumbnailUrl,href:a.thumbnailUrl},a.size/1e3),s='<div  class="file-row dz-processing dz-success dz-complete dz-image-preview"><div> <span class="preview" data-id="'+a.name+'">\t <a class="visible-xs-inline hidden-sm hidden-md hidden-lg" href="'+a.url+'" target="_blank"><img data-dz-thumbnail="" alt="'+a.name+'" src="'+a.thumbnailUrl+'"></a>\t\t\t\t\t <img class="hidden-xs" data-dz-thumbnail="" alt="'+a.name+'" src="'+a.thumbnailUrl+'">\t</span>  </div>  <div class="hidden-xs">   <p class="name" data-dz-name=""><a href="'+a.url+'" target="_blank">'+a.name+'</a></p><div class="name2" data-dz-name2=""></div>   <strong class="error text-danger" data-dz-errormessage=""></strong>   </div>  <div class="hidden-xs">    <p class="size" data-dz-size=""><strong>'+i+'</strong> KB</p>    <div class="fileurl" data-dz-id=""></div>  <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">  <div class="progress-bar progress-bar-success" style="width:0%;" data-dz-uploadprogress=""></div> </div> </div> <div> <button dz-started="" class="btn btn-primary start">   <i class="glyphicon glyphicon-upload"></i>   <span>Start</span> </button> <button data-dz-remove="" class="btn btn-warning cancel">   <i class="glyphicon glyphicon-ban-circle"></i>  <span>Cancel</span>  </button> <button class="btn btn-danger delete" onClick="deletethisfile(\''+a.name+'\',this)" type="button"> <i class="glyphicon glyphicon-trash"></i> <span>Delete</span> </button> <button class="btn btn-danger delete" onClick="rotateimage(\''+a.name+'\',this)"   type="button"> <i class="glyphicon glyphicon-refresh"></i> <span>Rotate</span> </button>  <button class="btn btn-danger delete" onClick="saveimage(\''+a.name+'\',this)"   type="button"> <i class="glyphicon glyphicon-save-file"></i> <span>save</span> </button> </div></div>';$("#previews2").prepend(s),nfile++}),gallery=$("#previews2 a:visible").simpleLightbox()}}),this.on("uploadprogress",function(e){$("#upload").hide(),$("#uploadprocessbar").show()}),this.on("addedfile",function(a){return nfile>10?(this.removeFile(a),void alert("Over Limit Upload")):(nfile++,$("#upload").show(),void $("button.start").on("click",function(a){e.processQueue()}))})}});$("button.btn.btn-danger.delete").on("click",function(e){}),$("#upload").on("click",function(a){e.processQueue()}),e.on("complete",function(e){$("#uploadprocessbar").hide()}),e.on("completemultiple",function(e){if(e[0].accepted){var a=$(e[0].xhr),i=$.parseJSON(a[0].responseText);if(""!=$("#itemId").val()){$("#itemId").val()+"/images/images"}$.each(i.files,function(e,a){var i=a,s=i.size/1e3,t='<div  class="file-row dz-processing dz-success dz-complete dz-image-preview"><div> <span class="preview" data-id="'+i.name+'"> <a class="visible-xs-inline hidden-sm hidden-md hidden-lg" href="'+i.url+'" target="_blank"><img data-dz-thumbnail="" alt="'+i.name+'" src="'+i.thumbnailUrl+'"></a>\t\t\t\t\t <img class="hidden-xs" data-dz-thumbnail="" alt="'+i.name+'" src="'+i.thumbnailUrl+'">\t</span>  </div>  <div class="hidden-xs">   <p class="name" data-dz-name=""><a href="'+i.url+'" target="_blank">'+i.name+'</a></p><div class="name2" data-dz-name2=""></div>   <strong class="error text-danger" data-dz-errormessage=""></strong>   </div>  <div class="hidden-xs">    <p class="size" data-dz-size=""><strong>'+s+'</strong> KB</p>    <div class="fileurl" data-dz-id=""></div>  <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">  <div class="progress-bar progress-bar-success" style="width:0%;" data-dz-uploadprogress=""></div> </div> </div> <div> <button dz-started="" class="btn btn-primary start">   <i class="glyphicon glyphicon-upload"></i>   <span>Start</span> </button> <button data-dz-remove="" class="btn btn-warning cancel">   <i class="glyphicon glyphicon-ban-circle"></i>  <span>Cancel</span>  </button> <button class="btn btn-danger delete" onClick="deletethisfile(\''+i.name+'\',this)" type="button"> <i class="glyphicon glyphicon-trash"></i> <span>Delete</span> </button>  <button class="btn btn-danger delete" onClick="rotateimage(\''+i.name+'\',this)" type="button"> <i class="glyphicon glyphicon-refresh"></i> <span>rotate</span> </button> <button class="btn btn-danger delete" onClick="saveimage(\''+i.name+'\',this)"   type="button"> <i class="glyphicon glyphicon-save-file"></i> <span>save</span> </button> </div></div>';$("#previews2").prepend(t)}),$("#upload").hide(),gallery=$("#previews2 a:visible").simpleLightbox()}}),e.on("success",function(e){$('div[data-theme="a"]').hide()})});var firstspanview=0;